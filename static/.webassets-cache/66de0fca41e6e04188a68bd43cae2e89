Vvar Chart, Dashboard, activateListeners, all, averageValues, avgTempByMonth, buildCalendarJson, cal, chart, checkAvg, dataSlice, dateDim, dayOfWeek, db, deltaPrcnts, getColorIndex, hourChart, monthChart, monthDim, monthNameDim, ndx, orderByAvg, parseDate, seasonChart, seasonDim, startTime, t1, timeChart, timeSeries, yearChart;\u000a\u000andx = null;\u000a\u000aall = null;\u000a\u000adateDim = null;\u000a\u000adayOfWeek = null;\u000a\u000aavgTempByMonth = null;\u000a\u000adataSlice = null;\u000a\u000achart = null;\u000a\u000amonthNameDim = null;\u000a\u000amonthDim = null;\u000a\u000aseasonDim = null;\u000a\u000atimeChart = null;\u000a\u000aseasonChart = null;\u000a\u000aall = null;\u000a\u000adb = null;\u000a\u000acal = null;\u000a\u000astartTime = new Date();\u000a\u000a(function($) {})(jQuery);\u000a\u000at1 = null;\u000a\u000aparseDate = d3.time.format("%Y-%m-%d %H:%M:%S").parse;\u000a\u000ad3.csv("static/aggedWeather.csv", function(data) {\u000a  db = new Dashboard();\u000a  db.parseData(data);\u000a  dc.renderAll();\u000a  db.activateListeners();\u000a  dataSlice = data[0];\u000a  console.log(dataSlice);\u000a  return console.log((new Date() - startTime) / 1000);\u000a});\u000a\u000atimeSeries = function(dim, metricName, displayName, metric) {\u000a  var maxDate, metric_avg, minDate, width;\u000a  timeChart = dc.compositeChart("#timeSeries .chart");\u000a  metric_avg = averageValues(dim, metricName + "_avg");\u000a  minDate = dim.bottom(1)[0].Date;\u000a  maxDate = dim.top(1)[0].Date;\u000a  width = $(timeChart.root()[0]).innerWidth() + 30;\u000a  timeChart.width(width).height(width * .333).dimension(dim).renderHorizontalGridLines(true).x(d3.time.scale().domain([minDate, maxDate])).xUnits(d3.time.months).elasticY(true).brushOn(true).legend(dc.legend().x(60).y(10).itemHeight(13).gap(5)).yAxisLabel(displayName).compose([\u000a    dc.lineChart(timeChart).colors(['blue']).group(metric, "actual" + displayName).valueAccessor(function(d) {\u000a      return d.value.avg;\u000a    }).interpolate('basis-open').dimension(dim), dc.lineChart(timeChart).colors(['red']).group(metric, "Normal " + displayName).valueAccessor(function(d) {\u000a      return d.value.avg_avg;\u000a    }).interpolate('basis-open')\u000a  ]);\u000a  return timeChart;\u000a};\u000a\u000amonthChart = function(dim, metricName, displayName, metric) {\u000a  var actualTemp, avgTemp, mainChart, monthArray, width;\u000a  mainChart = dc.compositeChart("#monthChart");\u000a  width = $(mainChart.root()[0]).outerWidth() + 100;\u000a  monthArray = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec"];\u000a  actualTemp = dc.barChart(mainChart);\u000a  avgTemp = dc.barChart(mainChart);\u000a  actualTemp.group(metric).valueAccessor(function(d) {\u000a    return d.value.avg;\u000a  }).colors(['lightblue', 'blue', 'green']).colorAccessor(function(d, i) {\u000a    if (d.y > 50) {\u000a      return 2;\u000a    } else {\u000a      return 0;\u000a    }\u000a  }).colorDomain([0, 2]);\u000a  avgTemp.group(metric).valueAccessor(function(d) {\u000a    return d.value.avg_avg;\u000a  }).colors(['red']);\u000a  mainChart.width(width).height(width * .4).dimension(dim).group(metric).elasticY(false).yAxisLabel(displayName).title(function(d) {\u000a    return "Title";\u000a  }).renderTitle(true).x(d3.scale.ordinal().domain(monthArray)).xUnits(dc.units.ordinal).renderHorizontalGridLines(true).compose([actualTemp, avgTemp]);\u000a  return mainChart;\u000a};\u000a\u000ayearChart = function(dim, metricName, displayName, metric) {\u000a  var actualTemp, avgTemp, mainChart, width;\u000a  mainChart = dc.compositeChart("#yearChart");\u000a  width = $(mainChart.root()[0]).outerWidth() + 100;\u000a  actualTemp = dc.barChart(mainChart);\u000a  avgTemp = dc.barChart(mainChart);\u000a  actualTemp.group(metric).valueAccessor(function(d) {\u000a    return d.value.avg;\u000a  }).colors(['rgb(215,48,39)', 'rgb(252,141,89)', 'rgb(254,224,144)', 'rgb(255,255,191)', 'rgb(224,243,248)', 'rgb(145,191,219)', 'rgb(69,117,180)']).colorAccessor(function(d, i) {\u000a    var diff, norm;\u000a    norm = d.data.value.avg_avg;\u000a    diff = (d.y - norm) / norm;\u000a    return getColorIndex(diff);\u000a  }).colorDomain([0, 6]);\u000a  avgTemp.group(metric).valueAccessor(function(d) {\u000a    return d.value.avg_avg;\u000a  }).colors(['rgba(255,255,191,0)']);\u000a  mainChart.width(width).height(width * .4).dimension(dim).group(metric).elasticY(true).yAxisLabel(displayName).title(function(d) {\u000a    return "Title";\u000a  }).renderTitle(true).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).renderHorizontalGridLines(true).compose([actualTemp, avgTemp]);\u000a  return mainChart;\u000a};\u000a\u000ahourChart = function(dim, metricName, displayName, metric) {\u000a  var chartObject, width;\u000a  chartObject = dc.barChart("#hourChart");\u000a  width = $(chartObject.root()[0]).outerWidth() + 100;\u000a  chartObject.width(width).height(width * .4).dimension(dim).group(metric).elasticY(true).yAxisLabel(displayName).brushOn(true).round(dc.round.floor).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).valueAccessor(function(d) {\u000a    return d.value.avg;\u000a  }).centerBar(false).renderHorizontalGridLines(true);\u000a  return chartObject;\u000a};\u000a\u000aaverageValues = function(dim, attr) {\u000a  var reduceAddAvg, reduceInitAvg, reduceRemoveAvg;\u000a  reduceAddAvg = function(attr) {\u000a    return function(p, v) {\u000a      ++p.count;\u000a      p.sum += +v[attr];\u000a      p.avg_sum += +v[attr + "_avg"];\u000a      p.avg_avg = checkAvg(p, p.avg_sum);\u000a      p.avg = checkAvg(p, p.sum);\u000a      return p;\u000a    };\u000a  };\u000a  reduceRemoveAvg = function(attr) {\u000a    return function(p, v) {\u000a      --p.count;\u000a      p.avg_sum -= +v[attr + "_avg"];\u000a      p.avg_avg = checkAvg(p, p.avg_sum);\u000a      p.sum -= +v[attr];\u000a      p.avg = checkAvg(p, p.sum);\u000a      return p;\u000a    };\u000a  };\u000a  reduceInitAvg = function() {\u000a    return {\u000a      count: 0,\u000a      sum: 0,\u000a      avg: 0,\u000a      avg_sum: 0,\u000a      avg_avg: 0\u000a    };\u000a  };\u000a  return dim.group().reduce(reduceAddAvg(attr), reduceRemoveAvg(attr), reduceInitAvg);\u000a};\u000a\u000aorderByAvg = function(p) {\u000a  return p.avg;\u000a};\u000a\u000adeltaPrcnts = function(dim, attr) {\u000a  var reduceAddAvg, reduceInitAvg, reduceRemoveAvg;\u000a  reduceAddAvg = function(attr) {\u000a    return function(p, v) {\u000a      ++p.count;\u000a      p.sum += +v[attr];\u000a      p.avg = checkAvg(p);\u000a      p.deltaPercnt = (p.avg / v[attr + "_avg"]) / v[attr + "_avg"] * 100;\u000a      return p;\u000a    };\u000a  };\u000a  reduceRemoveAvg = function(attr) {\u000a    return function(p, v) {\u000a      --p.count;\u000a      p.sum += +v[attr];\u000a      p.avg = checkAvg(p);\u000a      p.deltaPercnt = (p.avg / v[attr + "_avg"]) / v[attr + "_avg"] * 100;\u000a      return p;\u000a    };\u000a  };\u000a  reduceInitAvg = function() {\u000a    return {\u000a      count: 0,\u000a      sum: 0,\u000a      avg: 0,\u000a      deltaPercnt: 0\u000a    };\u000a  };\u000a  return dim.group().reduce(reduceAddAvg(attr), reduceRemoveAvg(attr), reduceInitAvg);\u000a};\u000a\u000acheckAvg = function(p, sum) {\u000a  if (sum < 0.0000001) {\u000a    p.avg = 0;\u000a  } else {\u000a    p.avg = sum / p.count;\u000a  }\u000a  return p.avg;\u000a};\u000a\u000abuildCalendarJson = function(metricArray) {\u000a  var calFormattedJson, object, _i, _len;\u000a  calFormattedJson = {};\u000a  for (_i = 0, _len = metricArray.length; _i < _len; _i++) {\u000a    object = metricArray[_i];\u000a    calFormattedJson[String(object.key.getTime()).slice(0, -3)] = Math.round(object.value.avg);\u000a  }\u000a  return calFormattedJson;\u000a};\u000a\u000agetColorIndex = function(diff) {\u000a  var abs_diff;\u000a  abs_diff = Math.abs(diff);\u000a  if (abs_diff < .025) {\u000a    return 3;\u000a  } else if (abs_diff < .05) {\u000a    if (diff > 0) {\u000a      return 2;\u000a    } else {\u000a      return 4;\u000a    }\u000a  } else if (abs_diff < .075) {\u000a    if (diff > 0) {\u000a      return 1;\u000a    } else {\u000a      return 5;\u000a    }\u000a  } else {\u000a    if (diff > 0) {\u000a      0;\u000a    }\u000a    return 6;\u000a  }\u000a};\u000a\u000aactivateListeners = function() {\u000a  return $("#timeSeries .buttons").on("click", "button", function() {\u000a    var displayName, metricName;\u000a    metricName = $(this).attr("data-name");\u000a    displayName = $(this).html();\u000a    buildCharts(metricName, displayName);\u000a    dc.filterAll();\u000a    return dc.renderAll();\u000a  });\u000a};\u000a\u000aDashboard = (function() {\u000a  function Dashboard() {\u000a    this.metricName = "Temp";\u000a    this.displayName = "Temperature (F)";\u000a    this.queries = [];\u000a    this.inputBox = null;\u000a    this.cf = null;\u000a    this.allGroups = null;\u000a    this.charts = {};\u000a    this.dimension = {};\u000a    this.metric = {};\u000a    this.cal = null;\u000a    this.monthArray = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec"];\u000a    this.timeSpan = null;\u000a  }\u000a\u000a  Dashboard.prototype.parseData = function(data) {\u000a    var d, _i, _len;\u000a    this.cf = crossfilter(data);\u000a    this.allGroups = this.cf.groupAll();\u000a    for (_i = 0, _len = data.length; _i < _len; _i++) {\u000a      d = data[_i];\u000a      d.Date = parseDate(d.Date);\u000a      d.monthNum = d.Date.getMonth();\u000a      d.hourlyNum = d.Date.getHours();\u000a      d.Year = d.Date.getFullYear();\u000a      d.monthStamp = d3.time.month(d.Date);\u000a      d.dayStamp = d3.time.day(d.Date);\u000a    }\u000a    this.buildDimensions();\u000a    this.buildMonthChart();\u000a    this.buildYearChart();\u000a    this.buildHourlyChart();\u000a    this.buildTimeSeriesChart();\u000a    return this.loadCalendar();\u000a  };\u000a\u000a  Dashboard.prototype.buildDimensions = function() {\u000a    var go;\u000a    go = this;\u000a    this.dimension.yearName = this.cf.dimension(function(d) {\u000a      return d.Year;\u000a    });\u000a    this.dimension.timeOfDay = this.cf.dimension(function(d) {\u000a      return d.hourlyNum;\u000a    });\u000a    this.dimension.monthStamp = this.cf.dimension(function(d) {\u000a      return d.monthStamp;\u000a    });\u000a    this.dimension.dayStamp = this.cf.dimension(function(d) {\u000a      return d.dayStamp;\u000a    });\u000a    return this.dimension.monthNames = this.cf.dimension(function(d) {\u000a      var month;\u000a      month = d.monthNum;\u000a      return go.monthArray[month];\u000a    });\u000a  };\u000a\u000a  Dashboard.prototype.buildMetrics = function() {\u000a    this.metric.avgMonthOverTime = averageValues(this.dimension.monthStamp, this.metricName);\u000a    this.metric.avg_avgMonthOverTime = averageValues(this.dimension.monthStamp, this.metricName + "_avg");\u000a    this.metric.yearAvgs = averageValues(this.dimension.yearName, this.metricName);\u000a    this.metric.hourAvgs = averageValues(this.dimension.timeOfDay, this.metricName);\u000a    this.metric.monthAvgs = averageValues(this.dimension.monthNames, this.metricName);\u000a    return this.metric.avgDayOverTime = averageValues(this.dimension.dayStamp, this.metricName);\u000a  };\u000a\u000a  Dashboard.prototype.buildMonthChart = function() {\u000a    var actualValuesChart, metric, thisChart;\u000a    thisChart = new Chart(dc.compositeChart("#monthChart"), this.dimension.monthNames);\u000a    metric = thisChart.averageMetric(this.metricName);\u000a    actualValuesChart = dc.barChart(thisChart.chartObject);\u000a    actualValuesChart.group(metric).valueAccessor(function(d) {\u000a      return d.value.avg;\u000a    });\u000a    thisChart.chartObject.dimension(this.dimension.monthNames).width(thisChart.width + 100).height(thisChart.width * .4).yAxisLabel(this.displayName).elasticY(true).x(d3.scale.ordinal().domain(this.monthArray)).xUnits(dc.units.ordinal).renderHorizontalGridLines(true).compose([actualValuesChart]);\u000a    thisChart.innerChart.values = actualValuesChart;\u000a    return this.charts.monthChart = thisChart;\u000a  };\u000a\u000a  Dashboard.prototype.buildYearChart = function() {\u000a    var actualValuesChart, metric, thisChart;\u000a    thisChart = new Chart(dc.compositeChart("#yearChart"), this.dimension.yearName);\u000a    metric = thisChart.averageMetric(this.metricName);\u000a    actualValuesChart = dc.barChart(thisChart.chartObject);\u000a    actualValuesChart.group(metric).valueAccessor(function(d) {\u000a      return d.value.avg;\u000a    });\u000a    thisChart.chartObject.dimension(this.dimension.yearName).width(thisChart.width + 100).height(thisChart.width * .4).yAxisLabel(this.displayName).elasticY(true).group(metric).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).renderHorizontalGridLines(true).compose([actualValuesChart]);\u000a    thisChart.innerChart.values = actualValuesChart;\u000a    return this.charts.yearChart = thisChart;\u000a  };\u000a\u000a  Dashboard.prototype.buildHourlyChart = function() {\u000a    var actualValuesChart, metric, thisChart;\u000a    thisChart = new Chart(dc.compositeChart("#hourChart"), this.dimension.timeOfDay);\u000a    metric = thisChart.averageMetric(this.metricName);\u000a    actualValuesChart = dc.barChart(thisChart.chartObject);\u000a    actualValuesChart.group(metric).valueAccessor(function(d) {\u000a      return d.value.avg;\u000a    });\u000a    thisChart.chartObject.dimension(this.dimension.timeOfDay).width(thisChart.width + 100).height(thisChart.width * .4).yAxisLabel(this.displayName).elasticY(true).group(metric).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).renderHorizontalGridLines(true).compose([actualValuesChart]);\u000a    thisChart.innerChart.values = actualValuesChart;\u000a    return this.charts.hourChart = thisChart;\u000a  };\u000a\u000a  Dashboard.prototype.buildTimeSeriesChart = function() {\u000a    var actualValuesChart, maxDate, metric, minDate, normValuesChart, thisChart;\u000a    thisChart = new Chart(dc.compositeChart("#timeSeries .chart"), this.dimension.monthStamp);\u000a    metric = thisChart.averageMetric(this.metricName);\u000a    minDate = this.dimension.monthStamp.bottom(1)[0].Date;\u000a    maxDate = this.dimension.monthStamp.top(1)[0].Date;\u000a    actualValuesChart = dc.lineChart(thisChart.chartObject);\u000a    actualValuesChart.group(metric, "actual " + this.displayName).valueAccessor(function(d) {\u000a      return d.value.avg;\u000a    }).colors(['green']).interpolate('basis-open');\u000a    normValuesChart = dc.lineChart(thisChart.chartObject).group(metric, "normal " + this.displayName).valueAccessor(function(d) {\u000a      return d.value.avg_avg;\u000a    }).colors(['rgba(0,0,255,.5)']).interpolate('basis-open');\u000a    thisChart.chartObject.dimension(this.dimension.monthStamp).width(thisChart.width + 30).height(thisChart.width * .333).yAxisLabel(this.displayName).elasticY(true).x(d3.time.scale().domain([minDate, maxDate])).xUnits(d3.time.months).brushOn(true).legend(dc.legend().x(60).y(10).itemHeight(13).gap(5)).renderHorizontalGridLines(true).compose([actualValuesChart, normValuesChart]);\u000a    thisChart.innerChart.values = actualValuesChart;\u000a    thisChart.innerChart.normalValues = normValuesChart;\u000a    return this.charts.timeSeries = thisChart;\u000a  };\u000a\u000a  Dashboard.prototype.buildCharts = function() {\u000a    var go, _i, _len, _ref;\u000a    go = this;\u000a    this.charts.push(yearChart(this.dimension.yearName, this.metricName, this.displayName, this.yearAvgs));\u000a    timeChart = timeSeries(this.dimension.monthStamp, this.metricName, this.displayName, this.avgMonthOverTime);\u000a    this.charts.push(timeChart);\u000a    _ref = this.charts;\u000a    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\u000a      chart = _ref[_i];\u000a      chart.renderlet(function() {\u000a        return dc.events.trigger(function() {\u000a          this.timeSpan = timeChart.filter();\u000a          return setTimeout((function() {\u000a            return go.loadCalendar();\u000a          }), 500);\u000a        });\u000a      });\u000a    }\u000a    return this.charts.push(hourChart(this.dimension.timeOfDay, this.metricName, this.displayName, this.hourAvgs));\u000a  };\u000a\u000a  Dashboard.prototype.refreshCharts = function() {\u000a    var chartName, go, _ref;\u000a    go = this;\u000a    dc.filterAll();\u000a    this.buildMetrics();\u000a    _ref = this.charts;\u000a    for (chartName in _ref) {\u000a      chart = _ref[chartName];\u000a      chart.chartObject.yAxisLabel(this.displayName);\u000a      chart.updateMetric(this.metricName, this.displayName);\u000a    }\u000a    dc.renderAll();\u000a    setTimeout((function() {\u000a      return go.loadCalendar();\u000a    }), 250);\u000a    return $("svg").click(function() {\u000a      return dc.events.trigger(function() {\u000a        this.timeSpan = go.charts.timeSeries.chartObject.filter();\u000a        return setTimeout((function() {\u000a          return go.loadCalendar();\u000a        }), 500);\u000a      });\u000a    });\u000a  };\u000a\u000a  Dashboard.prototype.activateListeners = function() {\u000a    var go;\u000a    go = this;\u000a    this.inputBox = $("#searchArea .input-group input")[0];\u000a    $("#timeSeries .buttons").on("click", "button", function() {\u000a      go.metricName = $(this).attr("data-name");\u000a      go.displayName = $(this).html();\u000a      return go.refreshCharts();\u000a    });\u000a    $("#searchArea").on("click", "button", function() {\u000a      var queryString;\u000a      queryString = go.inputBox.value;\u000a      return go.getWordCount(queryString);\u000a    });\u000a    $(this.inputBox).keypress(function(e) {\u000a      if (e.which === 13) {\u000a        return $("#searchArea button").click();\u000a      }\u000a    });\u000a    return $("svg").click(function() {\u000a      return dc.events.trigger(function() {\u000a        this.timeSpan = go.charts.timeSeries.chartObject.filter();\u000a        return setTimeout((function() {\u000a          return go.loadCalendar();\u000a        }), 500);\u000a      });\u000a    });\u000a  };\u000a\u000a  Dashboard.prototype.loadCalendar = function() {\u000a    var begin, end, interval, json, max, metricValues, numOfMonths, values;\u000a    console.log("in calendar");\u000a    $("#cal-heatmap").children().remove();\u000a    this.cal = new CalHeatMap();\u000a    begin = this.dimension.dayStamp.bottom(1)[0].Date;\u000a    end = this.dimension.dayStamp.top(1)[0].Date;\u000a    metricValues = averageValues(this.dimension.dayStamp, this.metricName);\u000a    json = buildCalendarJson(metricValues.all());\u000a    values = _.values(json);\u000a    max = _.max(values);\u000a    interval = max / 8;\u000a    numOfMonths = Math.ceil(((end - begin) / 31536000000) * 12);\u000a    return this.cal.init({\u000a      domain: "month",\u000a      subDomain: "x_day",\u000a      start: begin,\u000a      range: numOfMonths,\u000a      legend: [interval, 2 * interval, 3 * interval, 4 * interval, 5 * interval, 6 * interval, 7 * interval, max],\u000a      legendColors: ["#efefef", "black"],\u000a      cellSize: 12,\u000a      data: json,\u000a      dataType: "json"\u000a    });\u000a  };\u000a\u000a  Dashboard.prototype.getWordCount = function(queryString) {\u000a    var go, queryObject;\u000a    go = this;\u000a    queryObject = _.findWhere(this.queries, {\u000a      query: queryString\u000a    });\u000a    if (queryObject) {\u000a      return renderWordCountGraph(queryObject);\u000a    } else {\u000a      return $.ajax($SCRIPT_ROOT + '/newQuery', {\u000a        data: {\u000a          query: queryString\u000a        },\u000a        success: function(res, status, xhr) {\u000a          return go.renderWordCountGraph(res, status, xhr);\u000a        },\u000a        error: function(xhr, status, err) {\u000a          return console.log(err, status, xhr);\u000a        }\u000a      });\u000a    }\u000a  };\u000a\u000a  Dashboard.prototype.renderWordCountGraph = function(queryObject) {\u000a    return console.log(queryObject);\u000a  };\u000a\u000a  return Dashboard;\u000a\u000a})();\u000a\u000aChart = (function() {\u000a  function Chart(chartObject, dimension) {\u000a    this.chartObject = chartObject;\u000a    this.dimension = dimension;\u000a    this.innerChart = {};\u000a    this.width = $(this.chartObject.root()[0]).outerWidth();\u000a  }\u000a\u000a  Chart.prototype.updateMetric = function(metricName, displayName) {\u000a    var chartName, newMetric, _ref, _results;\u000a    _ref = this.innerChart;\u000a    _results = [];\u000a    for (chartName in _ref) {\u000a      chart = _ref[chartName];\u000a      newMetric = this.averageMetric(metricName);\u000a      chart.group(newMetric);\u000a      _results.push(this.chartObject.expireCache());\u000a    }\u000a    return _results;\u000a  };\u000a\u000a  Chart.prototype.bar = function() {\u000a    var metric;\u000a    this.chartObject = dc.barChart(this.anchor);\u000a    metric = this.metricFunction(this.dim, this.metricName);\u000a    return this.chartObject.width(800).height(300).dimension(this.dim).group(metric).x(d3.scale.ordinal().domain(["", "Fall", "Winter", "Spring", "Summer"])).xUnits(dc.units.ordinal).valueAccessor(function(d) {\u000a      return d.value.avg;\u000a    }).centerBar(true).renderHorizontalGridLines(true);\u000a  };\u000a\u000a  Chart.prototype.averageMetric = function(metricName) {\u000a    if (metricName === "Precip") {\u000a      return this.dimension.reduceSum(function(d) {\u000a        return d.total;\u000a      });\u000a    } else {\u000a      return averageValues(this.dimension, metricName);\u000a    }\u000a  };\u000a\u000a  return Chart;\u000a\u000a})();\u000a
p1
.