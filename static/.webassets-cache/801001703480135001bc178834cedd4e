Vvar HEIGHT, WIDTH, height, rateById, width;\u000a\u000aWIDTH = 800;\u000a\u000aHEIGHT = 450;\u000a\u000awidth = WIDTH;\u000a\u000aheight = HEIGHT;\u000a\u000arateById = d3.map();\u000a\u000a'var quantize = d3.scale.quantize() .domain([0, .15]) .range(d3.range(9).map(function(i) { return "q" + i + "-9"; })); var path = d3.geo.path(); var svg = d3.select("#canvas-svg").append("svg") .attr("width", width) .attr("height", height); data.forEach(function(d) { rateById.set(d.id, +d.rate); }); d3.json("/d3templates/us.json", function(error, us) { svg.append("g") .attr("class", "counties") .selectAll("path") .data(topojson.feature(us, us.objects.counties).features) .enter().append("path") .attr("class", function(d) { return quantize(rateById.get(d.id)); }) .attr("d", path); svg.append("path") .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; })) .attr("class", "states") .attr("d", path); });';\u000a
p1
.